# Item 12. toString을 항상 재정의하라
상위 클래스에서 이미 알맞게 재정의한 경우를 빼면, 모든 구체 클래스에서 Object의 `toString`을 재정의 해야한다. <br>
Object의 toString은 도무지 맘에 드는 문자열을 반환하는 경우가 없다. <Br>
일반 toString은 단순히 클래스 이름과 해시코드의 조합을 반환하는데, **일반적으로 toString을 사용하는 상대방은 간결하면서, 사람이 읽기 좋은 형태의 `유익한` 정보를 반환하길 기대한다!** <Br>
그런데 `PhoneNumber@adbbd`와 같은 `클래스_이름@16진수로_표시한_해시코드` 형태의 문자열이나 내뱉고 있으니... <br>
정말 열받는 일이 아닐 수 없다. <Br>
그러니까 그냥, **toString을 항상 재정의하라** <Br>
그 이점은 정말 다양하다.

## 1. toString 자동 호출 + 디버깅
toString은 자동 호출되는 곳이 많다. <Br>
println, printf, 문자열 연결 연산자 `+`, assert 구문, **디버거가 객체를 출력할 때** 자동으로 호출된다.  <Br>
toString을 제대로 구현해준다면 저 모든 구간에서 아주 편리해지는데, 반대로 구현하지 않는다면 저 모든 구간에서 불편함을 겪게 된다. <Br>
예시
1. 보통은 `System.out.println(phoneNumber + "에 연결할 수 없습니다.");`와 같이 진단용 메시지를 만들 것인데, 아주 편리하다. <br> 구현하지 않는 경우 쓸모없는 출력문이 될 것이다.
2. map 객체를 출력했을 때, `{Jinho=PhoneNumber@adbbd}`와 같은 끔찍한 문장 보다는 `{Jinho=010-0000-000}`과 같은 문장을 뱉는다면 얼마나 행복할까?

이처럼 toString을 구현함으로써 얻는 이득은 너무 많다. <br>
이제 실전에서 권장 사항들을 살펴보자.
## 2. toString은 주요 정보를 모두 반환하는 것이 좋다.
**객체 스스로를 완벽히 설명할 수 있는 문장이여야 한다.** <br>
혹시 객체가 너무 거대하거나 문자열로 표현하기에 적합하지 않다면, 어떤 요약 메시지라도 출력할 수 있어야 한다. <br>

## 3. 반환값의 포맷을 문서화할지 결정해라.
반환값의 포맷을 문서화한다면, 쓰는 사람들은 편할 것이다. 그리고 문서화 할것이면 **포맷에 맞는 문자열과 객체를 상호 전환할 수 있는 정적 팩터리나 생성자를 제공해주면 좋다!** <br>
이는 자바 플랫폼의 많은 값 클래스가 따르는 방식이다! <Br>

하지만 포맷을 명시하는 단점도 있는데, 이 클래스가 혹시나 여러군데에서 쓰인다면 프로그래머들은 평생 이 포맷에 얽메이게 된다. <Br>
왜냐하면 이 클래스를 사용하는 사람들은 죄다 명시된 포맷에 맞춰 파싱하거나, 객체를 만들고 잘 사용할 것이기 때문이다. <br>
그러다가 나중에 포맷을 바꾸기라도 한다면 지옥이 펼쳐질 것이다. <Br>
그래서 포맷을 명시하지 않는 것도 한 방법이다. 다음 릴리스에서 정보를 더 넣거나 포맷을 개선할 수 있는 유연성을 얻게 될 것이다! <br>

**둘 중에 하나만 딱 정하고, 모두가 알 수 있게 그 의도를 명확히 해라!**

```java
    /**
     * 이 전화번호의 문자열 표현을 반환한다.
     * 이 문자열은 "XXX-YYY-ZZZZ" 형태의 12글자로 구성된다.
     * XXX는 지역 코드, YYY는 프리픽스, ZZZZ는 가입자 번호다.
     * 각각의 대문자는 10진수 숫자 하나를 나타낸다.
     *
     * 전화번호의 각 부분의 값이 너무 작아서 자릿수를 채울 수 없다면,
     * 앞에서부터 0으로 채워나간다. 예컨대 가입자 번호가 123이라면
     * 전화번호의 마지막 네 문자는 "0123"이 된다.
     */
   @Override public String toString() {
       return String.format("%03d-%03d-%04d",
               areaCode, prefix, lineNum);
   }
```
위는 포맷을 명시한 예시이다. 명시하려면 이렇게 아주 정확하게 한다. <Br>

```java
  /*
  * 이 약물에 대한 대략적인 설명을 반환한다.
  * 다음은 이 설명의 일반적인 형태이나,
  * 상세 형식은 정해지지 않았으며 향후 변경될 수 있다.
  *
  * "[약물 #9: 유형=사랑, 냄새=테레빈유, 겉모습=먹물]"
  */
  @Override public String toString() { ... }
```
명시하지 않기로 했다면 위와 같이 작성할 수 있다. <Br>
이런 설명을 보고도 이 포맷에 맞춰 코딩해두었다면, 그 사람이 잘못했다고 욕할 수 있다.

## 4. toString이 반환한 값에 포함된 정보들을 얻을 수 있는 API를 제공하자.

예를 들어 계속 예시로 들은 전화번호는 지역 코드, 프리픽스, 가입자 번호로 구성되어 있다. <Br>
**그러니까 이들에 대한 접근자를 제공해달라는 것이다.** <Br>
그렇지 않으면 이 정보가 필요한 프로그래머들은 매번 힘들게 파싱해야한다. 이는 성능도 나빠지고, 귀찮은 작업이다. 그리고 나중에 포맷이라도 바뀐다면 더 끔찍한 일이 생기게 된다. <br>
또한 접근자를 제공하지 않는다는 것은, 사실상 현재의 형태가 포맷임을 시사한다.

## 5. 나머지 요소들
1. 정적 유틸리티 클래스는 toString을 제공할 이유가 없다
2. 대부분의 열거타입은 자바가 완벽한 toString을 만들어 두었다.
3. 하위 클래스들이 공유해야 할 문자열 표현이 있는 추상클래스의 경우엔 toString을 재정의 해줘야 한다.



## Reference
- Effective Java <조슈아 블로크>
