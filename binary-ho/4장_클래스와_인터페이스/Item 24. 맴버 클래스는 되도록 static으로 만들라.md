# Item 24. 맴버 클래스는 되도록 static으로 만들라
이번 아이템은 중첩 클래스를 언제 그리고 왜 사용해야 하는지에 관한 이야기이다 <br>
중첩 클래스는 총 4가지로 각각의 쓰임이 다르다. <br>
정적 맴버 클래스, 비정적 맴버 클래스, 익명 클래스, 지역 클래스의 4가지가 있다.

## 1. 정적 맴버 클래스
정적 맴버 클래스는 어떤 클래스 안에 선언되고, 바깥 클래스의 private 맴버에도 접근할 수 있다는 점만 빼고는 일반 클래스와 동일하다! <br>
일반 static 맴버와 똑같은 접근 규칙을 적용 받는다. 예를 들어 `private`로 선언했다면, 바깥 클래스에서만 접근이 가능하다. <br>
이런 특성 덕분에 **주로 바깥 클래스와 함께 쓰일 때만 그 효용이 있는 public 도우미 클래스로 쓰인다.** <br>
예를 들어 어떤 `계산기 클래스`가 있다고 생각해보자. <br>

이 계산기 클래스가 지원하는 연산의 종류들을 알려주는 `enum type`을 생각해보자! <br>
**이 열거 타입은 계산기 클래스의 public 정적 맴버 클래스가 되어야 한다.** <br>
그러면 `계산기.Operation.더하기`나, `계산기.Operation.빼기`와 같은 형태로, 원하는 연산을 참조할 수 있게 된다! 

## 2. 비정적 맴버 클래스의 의미

정적 맴버 클래스와 비정적 맴버 클래스의 구문 차이는 달랑 `static` 하나지만, 
**두 클래스의 의미상 차이는 의외로 크다!** <br>
**비정적 맴버 클래스의 인스턴스는 암묵적으로 바깥 클래스의 인스턴스와 연결된다!!** <br>
그래서 비정적 맴버 클래스의 인스턴스 메서드에서 `this`를 통해 바깥 인스턴스의 메서드를 호출하거나, 참조를 가져올 수 있다! <br>

**따라서, 개념상! 중첩 클래스의 인스턴스가 바깥 클래스의 인스턴스와 독립적으로 존재할 수 있다면, 정적 맴버 클래스로 만드는 것이 옳다!** <br>
비정적 맴버 클래스는 바깥 인스턴스 없이는 생성할 수 없기 때문이다. <br>

### 비정적 맴버 클래스 예시
비정적 맴버 클래스는 흔히 **어댑터나 반복자를 구현할 때 쓰인다.** <Br>
주로, 어떤 클래스의 인스턴스를 감싸 마치 다른 클래스의 인스턴스처럼 보이게 할 때 사용하는데, 반복자를 구현할 때 많이 쓰인다. <br>

어찌 되었든, 이런 안으로 부터 밖으로의 외부 참조가 필요 없는 상황이라면, <Br> 
즉, **맴버 클래스에서 바깥 인스턴스에 접근할 일이 없다면, 무조건 static을 붙여 정적 맴버 클래스로 만들자.** <br>
나쁜 경우 외부 참조가 필요 없는데도 가비지 컬렉션이 외부 클래스의 인스턴스를 수거하지 못하는 메모리 누수가 생길 수도 있다. <br>
참조가 눈에 보이지 않아서 위험하다. 

### private 정적 맴버 클래스
private 정적 맴버 클래스는 흔히 바깥 클래스가 표현하는 객체의 **한 부분을** 나타낼 떄 쓴다. <br>
말이 어려운데 **구체적인 예시로는 Map과 Map의 키-값 쌍을 표현하는 Entry 객체가 있다.** <Br>
1. 모든 엔트리는 Map과 연관되어 있다.
2. 그러나, **엔트리의 메서드들은 맵을 직접 사용하지 않는다.**
3. 이런 경우 비정적 맴버 클래스로 표현하는 것은 낭비이기 때문에 private 정적 맴버 클래스를 사용한다


 
## 3. 익명 클래스
익명 클래스는 쓰이는 시점에 선언과 동시에 인스턴스가 만들어지는 이름이 없는 클래스다. <br>
익명 클래스의 쓰임은 이제 대부분 람다가 대체했다. <br>
정적 팩터리 메서드를 구현하거나, 전략 패턴 등에서 쓰인다. <Br>
중첩 클래스가 
1. 한 메서드 안에서만 쓰이면서 
2. 그 인스턴스를 생성하는 지점이 단 한곳이고, 
3. 해당 타입으로 쓰기에 적합한 클래스나 인터페이스가 이미 있다면 ?


익명 클래스로 만들면 된다!

## 4. 지역 클래스
4가지 중접 클래스 중 가장 드물게 사용된다. <br>
지역 변수를 선언할 수 있는 곳이면 어디든 선언할 수 있고, 유효 범위도 지역 변수와 같다. <Br>
맴버 클래스처럼 이름이 있고, 반복해서 사용할 수 있으며, 익명 클래스처럼 비정적 문맥에서 사용될 때만 바깥 인스턴스를 참조할 수 있다. <br>
정적 맴버를 가질 수 없고, 짧게 작성해야 한다.


## Reference
- Effective Java <조슈아 블로크>
