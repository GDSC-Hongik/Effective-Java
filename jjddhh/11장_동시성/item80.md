# 스레드보다는 실행자, 태스크, 스트림을 애용하라

먼저 여기서 나오는 실행자 프레임워크(Executor Framework)가 무엇인지 알아보자

[Executor 프레임워크]<br>
https://12bme.tistory.com/359

비동기 작업을 위해 스레드를 사용하면 작업별로 스레드를 생성해야하고 스레드 풀 또한 직접 생성해줘야 한다.

실행자 프레임워크를 사용한다면 작업 단위와 실행 메커니즘이 분리되어 위와 같이 번거로운 작업을 매번 하지 않아도 될뿐더러 
사용하지 않을 때보다 성능을 튜닝하거나, 실행 과정을 관리하거나, 실행 상태를 모니터링하거나, 실행 기록을 로그로 남기거나, 
오류를 처리하고자 할 때 여러 가지 방법을 동원해 쉽고 효과적으로 처리하기가 좋다

결론적으로 비동기 작업을 위해서 단순히 스레드를 다루는 것보다 실행자 프레임워크를 이용하는 것이 더욱 효율적이라는 것이다.
> WAS 중 우리가 주로 사용하는 톰캣의 경우에도 실행자 프레임워크를 사용하여 멀티스레드 환경을 구성한다
> - 출처: chat_gpt
 
하지만 당연하게도 실행자 프레임워크를 사용할 때의 주의점이 존재한다.

실행자 프레임워크에서 지원하는 스레드 풀중에 Executors.newCachedThreadPool 는 가벼운 서비스에 적용한다면 일반적으로 좋은 선택이다.
그러나 무거운 프로덕션 서버에 해당 스레드 풀을 적용한다면, 
많은 요청이 들어올 시 CPU 이용률이 100%까지 치솟아 서버가 제대로 된 동작을 하지 못하는 상황이 발생할 수 있다.

> CachedThreadPool의 동작방식은 요청받은 태스크들을 큐에 쌓아두지 않고 즉시 스레드에 위임하여 작업을 실행한다.
> 만약 가용한 스레드가 없다면 스레드를 새로 생성한다.
 
따라서 이러한 상황에는 스레드 풀의 스레드 개수를 고정시킬 수 있는 Executors.newFixedTreadPool 을 선택하거나 
완전히 통제할 수 있는 TreadPoolExecutor를 직접 사용하는 것이 좋다.



