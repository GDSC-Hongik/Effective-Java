# 스트림에서는 부작용 없는 함수를 사용하라

## 스트림뿐 아니라 스트림 관련 객체에 건네지는 모든 함수 객체에 부작용이 없도록 하라

스트림을 사용할 때, 소스가 되는 객체의 상태를 변경하지 않는 '부작용이 없는' 동작이라 생각하여 부주의하게
사용하는 경우가 종종있다.

이는 틀리지 않은 생각이지만 아주 맞는 말은 아니다. 
스트림 연산에 건네는 함수 객체에 부작용(side effect)가 존재할 수 있기 때문이다.

따라서 스트림을 사용하여 연산할 때, 부작용이 일어나지 않도록 신중하게 작업해야 한다.


## 종단 연산중 forEach는 스트림이 수행한 계산 결과를 보고할 때만 이용해라

말 그대로 forEach를 수행한 계산 결과를 보고할 때만 이용하는 것이 좋다.

그 이유는, forEach는 단순히 요소를 반복하며 작업을 수행하기 때문에,
스트림 파이프라인에서 다른 중간 연산과 최종 연산이 최적화되는 것을 방해할 수 있다. 

예를 들어, forEach가 스트림에서 수행되면, 스트림의 요소를 병렬로 처리하거나, 
최적의 순서로 처리하는 등의 최적화 작업이 불가능해진다.

또한, forEach는 작업을 수행하는 것 외에는 다른 결과를 반환하지 않기 때문에, 
스트림에서 계산 결과를 수집하거나 변환하는 등의 작업을 수행하기 어렵다. 
이러한 경우, 다른 종단 연산 중에서 적합한 메서드를 선택하여 사용하는 것이 좋다.

- forEach 사용시 - 병렬 처리 x
```java
List<Integer> numbers = Arrays.asList(1, 2, 3, 4, 5);
numbers.stream()
        .filter(n -> n % 2 == 0)
        .map(n -> n * 2)
        .forEach(System.out::println);
```

- collect 사용시 - 병렬 처리 o
```java
List<Integer> result = numbers.stream()
                              .filter(n -> n % 2 == 0)
                              .map(n -> n * 2)
                              .collect(Collectors.toList());
System.out.println(result);

```